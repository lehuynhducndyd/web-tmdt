<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Create new variant" />
    <meta name="author" content="" />
    <title> - <%= device.name %>
    </title>
    <link href="/admin/css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>

<body class="sb-nav-fixed">
    <%- include('../layout/header'); -%>
        <div id="layoutSidenav">
            <%- include('../layout/sidenav'); -%>
                <div id="layoutSidenav_content">
                    <main>
                        <div class="container-fluid px-4">
                            <h1 class="mt-4">
                                <%= device.name %>
                            </h1>
                            <ol class="breadcrumb mb-4">
                                <li class="breadcrumb-item"><a href="/admin">Trang chủ</a></li>
                                <li class="breadcrumb-item"><a href="/admin/view-device/<%= device._id %>">Thiết bị</a>
                                </li>
                                <li class="breadcrumb-item active">Thêm mới biến thể thiết bị</li>
                            </ol>

                            <div class="row">
                                <div class="col-6 mx-auto">
                                    <div>
                                        <h5 style="padding: 10px 0;">Thêm biến thể mới cho <strong>
                                                <%= device.name %>
                                            </strong></h5>
                                        <form action="/admin/create-variant" method="post">

                                            <div class="mb-3">
                                                <label class="form-label">Màu sắc</label>
                                                <input type="text" class="form-control" name="color"
                                                    placeholder="Enter color" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Giảm giá (%)</label>
                                                <input type="number" class="form-control" name="discount" min="0"
                                                    max="100" value="0">
                                            </div>
                                            <div class="row">
                                                <div class="col-6 mb-3">
                                                    <label class="form-label">Dung lượng</label>
                                                    <input type="text" class="form-control" name="storage"
                                                        placeholder="e.g. 128GB" required>
                                                </div>

                                                <div class="col-6 mb-3">
                                                    <label class="form-label">RAM</label>
                                                    <input type="text" class="form-control" name="ram"
                                                        placeholder="e.g. 8GB" required>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="mb-3 col-6">
                                                    <label class="form-label">Giá bán (VNĐ)</label>
                                                    <input type="number" class="form-control" name="price"
                                                        placeholder="Enter price" required>
                                                </div>

                                                <div class="mb-3 col-6">
                                                    <label class="form-label">Tồn kho</label>
                                                    <input type="number" class="form-control" name="stock"
                                                        placeholder="Enter stock" required>
                                                </div>
                                            </div>



                                            <div class="mb-3">
                                                <label class="form-label">Hình ảnh 3D</label>
                                                <input type="text" class="form-control" name="model3d"
                                                    id="model3d-input" placeholder="https://...">
                                                <div id="model3d-preview" class="mt-3">
                                                    <!-- 3D model preview will be here -->
                                                </div>
                                            </div>

                                            <input type="hidden" name="deviceId" value="<%= device._id %>">

                                            <div class="mt-4">
                                                <button type="submit" class="btn btn-primary">Thêm mới biến thể</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                    <%- include('../layout/footer'); -%>
                </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>
        <script src="/admin/js/scripts.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const model3dInput = document.getElementById('model3d-input');
                const model3dPreview = document.getElementById('model3d-preview');

                model3dInput.addEventListener('input', function (event) {
                    const url = event.target.value.trim();
                    model3dPreview.innerHTML = ''; // Clear previous preview

                    if (url) {
                        // Create an iframe with attributes similar to your example
                        const iframe = document.createElement('iframe');
                        iframe.setAttribute('width', '100%'); // Use 100% for responsiveness
                        iframe.setAttribute('height', '400');
                        iframe.setAttribute('src', url);
                        iframe.setAttribute('frameborder', '0');
                        iframe.setAttribute('allowfullscreen', 'true');
                        model3dPreview.appendChild(iframe);
                    }
                });
            });
        </script>
</body>

</html>